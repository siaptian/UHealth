<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>UHealth - Diagnosa Gejala Penyakit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Segoe UI, Arial, sans-serif;
  background:#f8f6f1;
  color:#1e293b;
}

/* ===== JUDUL DI LUAR CARD (FIX CENTER) ===== */
.page-header{
  width:100%;
  text-align:center;
  padding:40px 20px 10px;
  color:#000;
}
.page-header h1{
  margin:0 auto;
  font-size:22px;
  font-weight:700;
  color:#000;
  text-align:center;
  display:block;
}

/* ===== CONTAINER ===== */
.container{
  max-width:520px;
  margin:0 auto 40px;
  padding:0 16px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

/* ===== CARD ===== */
.card{
  background:#fdfdfd;
  padding:22px;
  border-radius:18px;
  width:100%;
  box-shadow:0 6px 18px rgba(0,0,0,0.06);
}

/* ===== TEXT ===== */
h2{
  text-align:center;
  margin-top:0;
}

/* ===== SYMPTOM ===== */
.symptom{
  margin-bottom:14px;
  text-align:center;
}
.symptom label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
}

/* ===== BUTTON GROUP ===== */
.buttons{
  display:flex;
  justify-content:center;
  gap:10px;
}
.buttons button{
  flex:1;
  max-width:120px;
  padding:10px 16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#e2e8f0;
}
.buttons button.active{
  background:#3b82f6;
  color:white;
}

/* ===== MAIN BUTTON ===== */
#diagnoseBtn{
  width:100%;
  padding:14px;
  margin-top:18px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:white;
  font-weight:bold;
  cursor:pointer;
  font-size:16px;
}

/* ===== RESULT ===== */
.result{
  text-align:center;
}

/* ===== CONFIDENCE BAR ===== */
.progress{
  width:100%;
  height:18px;
  background:#e2e8f0;
  border-radius:20px;
  overflow:hidden;
  margin:16px 0;
}
.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#3b82f6,#60a5fa);
  transition:width 1s ease;
}
.confidence-text{
  font-weight:bold;
  font-size:1.1rem;
}

/* ===== BUTTON ===== */
button.reset{
  margin-top:12px;
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#3b82f6;
  color:white;
  cursor:pointer;
}
button.rs-btn{
  margin-top:10px;
  padding:12px 18px;
  border:none;
  border-radius:10px;
  background:#ef4444;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* ===== MOBILE FIX ===== */
@media(max-width:480px){
  .page-header h1{
    font-size:20px;
  }
  .card{
    padding:18px;
    border-radius:16px;
  }
}
</style>
</head>

<body>

<div class="page-header">
  <h1>UHealth - Diagnosa Gejala</h1>
</div>

<div class="container">

<div class="card">
<div class="symptom" data-key="demam">
<label>Demam</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="batuk">
<label>Batuk</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="pilek">
<label>Pilek</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="nyeri">
<label>Nyeri Otot / Sendi</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="mual">
<label>Mual / Muntah</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="ruam">
<label>Ruam Kulit</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<button id="diagnoseBtn">Mulai Diagnosa</button>
</div>

<div class="card result" id="result">
<h2>Hasil Diagnosa</h2>
<p>Silakan pilih gejala terlebih dahulu.</p>
</div>

</div>

<script>
const symptoms = {
  demam:null, batuk:null, pilek:null,
  nyeri:null, mual:null, ruam:null
};

document.querySelectorAll(".symptom").forEach(box=>{
  const key = box.dataset.key;
  const buttons = box.querySelectorAll("button");
  buttons.forEach(btn=>{
    btn.onclick = ()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      symptoms[key] = btn.dataset.val;
    };
  });
});

document.getElementById("diagnoseBtn").onclick = ()=>{
  for(let k in symptoms){
    if(symptoms[k]===null){
      alert("Lengkapi semua gejala!");
      return;
    }
  }

  const penyakit = [
    { nama:"Influenza", gejala:["demam","batuk","pilek"] },
    { nama:"Demam Berdarah (DBD)", gejala:["demam","nyeri","ruam"] },
    { nama:"Tifus", gejala:["demam","nyeri","mual"] }
  ];

  let hasil = { nama:"Tidak terdeteksi", confidence:0 };

  penyakit.forEach(p=>{
    let cocok = 0;
    p.gejala.forEach(g=>{
      if(symptoms[g]==="ya") cocok++;
    });
    let conf = Math.round((cocok/p.gejala.length)*100);
    if(conf > hasil.confidence){
      hasil = { nama:p.nama, confidence:conf };
    }
  });

  document.getElementById("result").innerHTML = `
    <h2>${hasil.nama}</h2>
    <div class="progress">
      <div class="progress-bar" id="bar"></div>
    </div>
    <div class="confidence-text">${hasil.confidence}% Confidence</div>
    <p>Semoga lekas sembuh üòä</p>

<hr style="margin:20px 0">
<h3>Tanya Dokter Online</h3>
<div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
  <a href="https://www.halodoc.com" target="_blank">
    <button style="padding:12px 18px;border:none;border-radius:10px;background:#10b981;color:white;font-weight:bold;cursor:pointer;">
      üí¨ Tanya di Halodoc
    </button>
  </a>
  <a href="https://www.alodokter.com" target="_blank">
    <button style="padding:12px 18px;border:none;border-radius:10px;background:#2563eb;color:white;font-weight:bold;cursor:pointer;">
      ü©∫ Tanya di Alodokter
    </button>
  </a>
</div>

<hr style="margin:20px 0">
<h3>Butuh Penanganan Lebih Lanjut?</h3>
<button class="rs-btn" onclick="cariRS()">üè• Cari RS Sekarang</button>
<div id="mapPreview" style="margin-top:16px"></div>

<a target="_blank"
   href="https://www.google.com/maps/search/rumah+sakit"
   style="display:block;margin-top:12px;color:#3b82f6;">
   Buka di Google Maps
</a>

<button class="reset" onclick="location.reload()">Ulangi</button>
  `;

  document.getElementById("result").scrollIntoView({behavior:"smooth"});

  setTimeout(()=>{
    document.getElementById("bar").style.width =
      hasil.confidence + "%";
  },100);

  if(hasil.confidence >= 70){
    setTimeout(cariRS,600);
  }
};

function cariRS(){
  if(!navigator.geolocation){
    alert("Browser tidak mendukung lokasi");
    return;
  }

  navigator.geolocation.getCurrentPosition(pos=>{
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    document.getElementById("mapPreview").innerHTML = `
      <iframe
        width="100%"
        height="300"
        style="border:0;border-radius:12px"
        loading="lazy"
        allowfullscreen
        src="https://www.google.com/maps?q=rumah+sakit+dekat+${lat},${lon}&output=embed">
      </iframe>
    `;
  });
}
</script>

</body>
</html>
