<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Diagnosa Gejala Penyakit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#f1f5f9;
  --muted:#cbd5e1;
  --accent:#3b82f6;
  --success:#22c55e;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui, Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}

.container{
  max-width:1100px;
  margin:40px auto;
  padding:16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:24px;
}

.card{
  background:var(--card);
  padding:28px;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.5);
}

h1,h2{
  text-align:center;
  margin-top:0;
}

.symptom{
  margin-bottom:18px;
}

.symptom label{
  display:block;
  margin-bottom:8px;
  font-weight:600;
}

.buttons button{
  padding:10px 18px;
  border:none;
  border-radius:10px;
  margin-right:10px;
  cursor:pointer;
  background:#334155;
  color:white;
  transition:.2s;
}

.buttons button.active{
  background:var(--accent);
  transform:translateY(-2px);
}

#diagnoseBtn{
  width:100%;
  margin-top:20px;
  padding:16px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  color:white;
  font-size:1.1rem;
  font-weight:bold;
  cursor:pointer;
}

.result{
  text-align:center;
}

.confidence{
  margin:16px 0;
  font-size:1.5rem;
  font-weight:bold;
  color:#93c5fd;
}

.box{
  background:#020617;
  padding:16px;
  border-radius:12px;
  margin-top:16px;
  text-align:left;
  color:var(--muted);
}

@media(max-width:800px){
  .container{grid-template-columns:1fr;}
}
</style>
</head>

<body>

<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Diagnosa Gejala</h1>

<div class="symptom" data-key="demam">
<label>Demam</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="batuk">
<label>Batuk</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="pilek">
<label>Pilek</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="nyeri">
<label>Nyeri Otot / Sendi</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="mual">
<label>Mual / Muntah</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="ruam">
<label>Ruam Kulit</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<button id="diagnoseBtn">Mulai Diagnosa</button>
</div>

<!-- OUTPUT -->
<div class="card result" id="result">
<h2>Hasil Diagnosa</h2>
<p class="muted">Pilih gejala lalu klik Mulai Diagnosa.</p>
</div>

</div>

<script>
const symptoms={
  demam:null, batuk:null, pilek:null,
  nyeri:null, mual:null, ruam:null
};

document.querySelectorAll(".symptom").forEach(box=>{
  const key=box.dataset.key;
  const buttons=box.querySelectorAll("button");
  buttons.forEach(btn=>{
    btn.onclick=()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      symptoms[key]=btn.dataset.val;
    };
  });
});

const penyakit=[
  {nama:"Influenza", gejala:["batuk","pilek","demam"], saran:"Istirahat, minum air hangat, dan vitamin."},
  {nama:"ISPA", gejala:["batuk","pilek"], saran:"Hindari debu dan asap rokok."},
  {nama:"Demam Berdarah", gejala:["demam","nyeri","ruam"], saran:"Segera ke rumah sakit dan banyak minum."},
  {nama:"Tifus", gejala:["demam","nyeri","mual"], saran:"Istirahat total dan makan lunak."},
  {nama:"Maag", gejala:["mual","nyeri"], saran:"Hindari makanan pedas dan telat makan."},
  {nama:"Alergi Kulit", gejala:["ruam"], saran:"Hindari pemicu alergi."}
];

document.getElementById("diagnoseBtn").onclick=()=>{
  for(let k in symptoms){
    if(symptoms[k]===null){
      alert("Lengkapi semua gejala!");
      return;
    }
  }

  let best={nama:"Tidak terdeteksi", confidence:0, saran:"Konsultasi dokter disarankan."};

  penyakit.forEach(p=>{
    let cocok=0;
    p.gejala.forEach(g=>{ if(symptoms[g]==="ya") cocok++; });
    let conf=Math.round((cocok/p.gejala.length)*100);
    if(conf>best.confidence){
      best={nama:p.nama, confidence:conf, saran:p.saran};
    }
  });

  if(best.confidence<40){
    best={nama:"Tidak terdeteksi kuat", confidence:best.confidence, saran:"Gejala belum cukup spesifik."};
  }

  document.getElementById("result").innerHTML=`
    <h2>${best.nama}</h2>
    <div class="confidence">${best.confidence}% Confidence</div>
    <div class="box"><strong>Saran:</strong><br>${best.saran}</div>
    <div class="box">Semoga lekas sembuh ❤️</div>
    <button onclick="location.reload()" style="margin-top:20px;padding:12px 24px;border:none;border-radius:10px;background:#ef4444;color:white;cursor:pointer;">
      Ulangi
    </button>
  `;
};
</script>

</body>
</html>
