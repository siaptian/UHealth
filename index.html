<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>UHealth - Diagnosa Gejala Penyakit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Segoe UI, Arial, sans-serif;
  background:#f8f6f1; /* putih cream */
  color:#1e293b;
}


/* JUDUL DI LUAR CARD */
.page-header{
  text-align:center;
  color:#000;
  padding:40px 20px 10px;
}

.page-header h1{
  margin:0;
  font-size:32px;
  font-weight:700;
}

.container{
  max-width:700px;
  margin:20px auto 40px;
  display:flex;
  flex-direction:column;
  gap:24px;
}

.card{
  background:#ffffff;
  padding:28px;
  border-radius:16px;
  max-width:600px;
  width:100%;
  margin:0 auto;
  box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

h2{
  text-align:center;
  margin-top:0;
}

.symptom{
  margin-bottom:14px;
  text-align:center;
}

.symptom label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
}

.buttons{
  display:flex;
  justify-content:center;
  gap:10px;
}

.buttons button{
  padding:10px 16px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#e2e8f0;
  min-width:90px;
}

.buttons button.active{
  background:#3b82f6;
  color:white;
}

#diagnoseBtn{
  padding:14px 28px;
  margin:24px auto 0;
  display:block;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.result{
  text-align:center;
}

/* CONFIDENCE BAR */
.progress{
  width:100%;
  height:20px;
  background:#e2e8f0;
  border-radius:20px;
  overflow:hidden;
  margin:16px 0;
}

.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#3b82f6,#60a5fa);
  transition:width 1s ease;
}

.confidence-text{
  font-weight:bold;
  font-size:1.2rem;
}

button.reset{
  margin-top:12px;
  padding:10px 16px;
  border:none;
  border-radius:8px;
  background:#3b82f6;
  color:white;
  cursor:pointer;
}

button.rs-btn{
  margin-top:10px;
  padding:12px 18px;
  border:none;
  border-radius:10px;
  background:#ef4444;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

/* =========================
   MOBILE OPTIMIZATION
========================= */
@media (max-width:600px){

  .page-header{
    padding:28px 16px 6px;
  }

  .page-header h1{
    font-size:24px;
  }

  .container{
    margin:10px auto 30px;
    padding:0 12px; /* biar tidak nempel pinggir */
    gap:16px;
  }

  .card{
    padding:18px;
    border-radius:14px;
  }

  .symptom{
    margin-bottom:18px;
  }

  .symptom label{
    font-size:14px;
  }

  .buttons{
    flex-direction:row;
    gap:8px;
  }

  .buttons button{
    flex:1; /* tombol sama lebar */
    min-width:unset;
    padding:10px;
  }

  #diagnoseBtn{
    width:100%;
    margin-top:20px;
  }

  button.rs-btn,
  button.reset{
    width:100%;
  }

  iframe{
    height:250px;
  }

  .confidence-text{
    font-size:1rem;
  }
}

</style>
</head>

<body>

<!-- JUDUL DI LUAR CARD -->
<div class="page-header">
  <h1>UHealth - Diagnosa Gejala</h1>
</div>

<div class="container">

<div class="card">

<div class="symptom" data-key="demam">
<label>Demam</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="batuk">
<label>Batuk</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="pilek">
<label>Pilek</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="nyeri">
<label>Nyeri Otot / Sendi</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="mual">
<label>Mual / Muntah</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="ruam">
<label>Ruam Kulit</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<button id="diagnoseBtn">Mulai Diagnosa</button>
</div>

<div class="card result" id="result">
<h2>Hasil Diagnosa</h2>
<p>Silakan pilih gejala terlebih dahulu.</p>
</div>

</div>

<script>
const symptoms = {
  demam:null, batuk:null, pilek:null,
  nyeri:null, mual:null, ruam:null
};

document.querySelectorAll(".symptom").forEach(box=>{
  const key = box.dataset.key;
  const buttons = box.querySelectorAll("button");
  buttons.forEach(btn=>{
    btn.onclick = ()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      symptoms[key] = btn.dataset.val;
    };
  });
});

document.getElementById("diagnoseBtn").onclick = ()=>{
  for(let k in symptoms){
    if(symptoms[k]===null){
      alert("Lengkapi semua gejala!");
      return;
    }
  }

  const penyakit = [
    { nama:"Influenza", gejala:["demam","batuk","pilek"] },
    { nama:"Demam Berdarah (DBD)", gejala:["demam","nyeri","ruam"] },
    { nama:"Tifus", gejala:["demam","nyeri","mual"] }
  ];

  let hasil = { nama:"Tidak terdeteksi", confidence:0 };

  penyakit.forEach(p=>{
    let cocok = 0;
    p.gejala.forEach(g=>{
      if(symptoms[g]==="ya") cocok++;
    });
    let conf = Math.round((cocok/p.gejala.length)*100);
    if(conf > hasil.confidence){
      hasil = { nama:p.nama, confidence:conf };
    }
  });

  document.getElementById("result").innerHTML = `
    <h2>${hasil.nama}</h2>
    <div class="progress">
      <div class="progress-bar" id="bar"></div>
    </div>
    <div class="confidence-text">${hasil.confidence}% Confidence</div>
    <p>Semoga lekas sembuh üòä</p>
<hr style="margin:20px 0">

<h3>Tanya Dokter Online</h3>

<div style="display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
  <a href="https://www.halodoc.com" target="_blank">
    <button style="
      padding:12px 18px;
      border:none;
      border-radius:10px;
      background:#10b981;
      color:white;
      font-weight:bold;
      cursor:pointer;
    ">
      üí¨ Tanya di Halodoc
    </button>
  </a>

  <a href="https://www.alodokter.com" target="_blank">
    <button style="
      padding:12px 18px;
      border:none;
      border-radius:10px;
      background:#2563eb;
      color:white;
      font-weight:bold;
      cursor:pointer;
    ">
      ü©∫ Tanya di Alodokter
    </button>
  </a>
</div>

    <hr style="margin:20px 0">
    <h3>Butuh Penanganan Lebih Lanjut?</h3>
    <button class="rs-btn" onclick="cariRS()">üè• Cari RS Sekarang</button>
    <div id="mapPreview" style="margin-top:16px"></div>
    <a target="_blank"
       href="https://www.google.com/maps/search/rumah+sakit"
       style="display:block;margin-top:12px;color:#3b82f6;">
       Buka di Google Maps
    </a>
    <button class="reset" onclick="location.reload()">Ulangi</button>
  `;

  document.getElementById("result").scrollIntoView({behavior:"smooth"});

  setTimeout(()=>{
    document.getElementById("bar").style.width =
      hasil.confidence + "%";
  },100);

  if(hasil.confidence >= 70){
    setTimeout(cariRS,600);
  }
};

function cariRS(){
  if(!navigator.geolocation){
    alert("Browser tidak mendukung lokasi");
    return;
  }

  navigator.geolocation.getCurrentPosition(pos=>{
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    document.getElementById("mapPreview").innerHTML = `
      <iframe
        width="100%"
        height="300"
        style="border:0;border-radius:12px"
        loading="lazy"
        allowfullscreen
        src="https://www.google.com/maps?q=rumah+sakit+dekat+${lat},${lon}&output=embed">
      </iframe>
    `;
  });
}
</script>

</body>
</html>
