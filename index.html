<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Aplikasi Diagnosa Gejala Penyakit</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f8fafc;
  color:#0f172a;
}

.container{
  max-width:1000px;
  margin:40px auto;
  padding:16px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:24px;
}

.card{
  background:white;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}

h1,h2{
  text-align:center;
  margin-top:0;
}

.symptom{
  margin-bottom:16px;
}

.symptom label{
  display:block;
  margin-bottom:6px;
  font-weight:bold;
}

.buttons button{
  padding:10px 16px;
  border:none;
  border-radius:8px;
  margin-right:8px;
  cursor:pointer;
  background:#e5e7eb;
}

.buttons button.active{
  background:#3b82f6;
  color:white;
}

#diagnoseBtn{
  width:100%;
  padding:14px;
  margin-top:20px;
  border:none;
  border-radius:10px;
  background:#22c55e;
  color:white;
  font-weight:bold;
  cursor:pointer;
}

.result{
  text-align:center;
}

.confidence{
  margin:16px 0;
  font-size:1.4rem;
  font-weight:bold;
  color:#2563eb;
}

.penanganan{
  background:#f1f5f9;
  padding:14px;
  border-radius:10px;
  margin-top:16px;
  text-align:left;
}

@media(max-width:768px){
  .container{
    grid-template-columns:1fr;
  }
}
</style>
</head>

<body>

<div class="container">

<!-- INPUT -->
<div class="card">
<h1>Diagnosa Gejala</h1>

<div class="symptom" data-key="demam">
<label>Demam</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="batuk">
<label>Batuk</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="pilek">
<label>Pilek</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="nyeri">
<label>Nyeri Otot / Sendi</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="mual">
<label>Mual / Muntah</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<div class="symptom" data-key="ruam">
<label>Ruam Kulit</label>
<div class="buttons">
<button data-val="ya">Ya</button>
<button data-val="tidak">Tidak</button>
</div>
</div>

<button id="diagnoseBtn">Mulai Diagnosa</button>
</div>

<!-- OUTPUT -->
<div class="card result" id="result">
<h2>Hasil Diagnosa</h2>
<p>Silakan pilih gejala terlebih dahulu.</p>
</div>

</div>

<script>
/* DATA GEJALA */
const symptoms = {
  demam:null, batuk:null, pilek:null,
  nyeri:null, mual:null, ruam:null
};

/* EVENT TOMBOL YA / TIDAK */
document.querySelectorAll(".symptom").forEach(box=>{
  const key = box.dataset.key;
  const buttons = box.querySelectorAll("button");

  buttons.forEach(btn=>{
    btn.onclick = ()=>{
      buttons.forEach(b=>b.classList.remove("active"));
      btn.classList.add("active");
      symptoms[key] = btn.dataset.val;
    };
  });
});

/* DAFTAR PENYAKIT (SISTEM BARU) */
const penyakit = [
  {
    nama:"Influenza",
    gejala:["demam","batuk","pilek"],
    penanganan:"Istirahat cukup, minum air hangat, dan konsumsi vitamin."
  },
  {
    nama:"Demam Berdarah (DBD)",
    gejala:["demam","nyeri","ruam"],
    penanganan:"Segera ke rumah sakit dan perbanyak cairan."
  },
  {
    nama:"Tifus",
    gejala:["demam","nyeri","mual"],
    penanganan:"Istirahat total dan konsumsi makanan lunak."
  },
  {
    nama:"ISPA",
    gejala:["batuk","pilek","demam"],
    penanganan:"Hindari asap, istirahat, dan minum air putih."
  },
  {
    nama:"Gastritis (Maag)",
    gejala:["mual","nyeri"],
    penanganan:"Hindari makanan pedas dan makan teratur."
  },
  {
    nama:"Alergi Kulit",
    gejala:["ruam"],
    penanganan:"Hindari pemicu alergi dan jaga kebersihan kulit."
  },
  {
    nama:"Flu Ringan",
    gejala:["batuk","pilek"],
    penanganan:"Istirahat dan minum air hangat."
  }
];

/* PROSES DIAGNOSA */
document.getElementById("diagnoseBtn").onclick = ()=>{
  for(let k in symptoms){
    if(symptoms[k]===null){
      alert("Lengkapi semua gejala terlebih dahulu!");
      return;
    }
  }

  let hasil = {
    nama:"Tidak terdeteksi kuat",
    confidence:0,
    penanganan:"Disarankan konsultasi langsung dengan dokter."
  };

  penyakit.forEach(p=>{
    let cocok = 0;

    p.gejala.forEach(g=>{
      if(symptoms[g]==="ya") cocok++;
    });

    let confidence = Math.round((cocok / p.gejala.length) * 100);

    if(confidence > hasil.confidence){
      hasil = {
        nama:p.nama,
        confidence,
        penanganan:p.penanganan
      };
    }
  });

  if(hasil.confidence < 40){
    hasil.nama = "Tidak terdeteksi kuat";
    hasil.penanganan = "Gejala belum cukup kuat untuk menentukan penyakit tertentu.";
  }

  document.getElementById("result").innerHTML = `
    <h2>${hasil.nama}</h2>
    <div class="confidence">${hasil.confidence}% Confidence</div>
    <div class="penanganan">
      <strong>Penanganan / Pencegahan:</strong><br>
      ${hasil.penanganan}
    </div>
    <button onclick="location.reload()" style="margin-top:20px;padding:10px 20px;border:none;border-radius:8px;background:#ef4444;color:white;cursor:pointer;">
      Ulangi Diagnosa
    </button>
  `;
};
</script>

</body>
</html>
